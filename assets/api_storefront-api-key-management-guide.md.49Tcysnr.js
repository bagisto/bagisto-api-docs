import{_ as i,a,o as t,ai as e}from"./chunks/framework.BbOtTPsL.js";const g=JSON.parse('{"title":"Storefront API Key Management Guide","description":"","frontmatter":{},"headers":[],"relativePath":"api/storefront-api-key-management-guide.md","filePath":"api/storefront-api-key-management-guide.md","lastUpdated":1770104627000}'),n={name:"api/storefront-api-key-management-guide.md"};function p(l,s,h,k,r,d){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="storefront-api-key-management-guide" tabindex="-1">Storefront API Key Management Guide <a class="header-anchor" href="#storefront-api-key-management-guide" aria-label="Permalink to &quot;Storefront API Key Management Guide&quot;">‚Äã</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">‚Äã</a></h2><p>Bagisto uses <strong>API keys</strong> to authenticate requests to your storefront and shop API endpoints. Think of your API key as a secure password that identifies your application to Bagisto.</p><blockquote><p><strong>‚ö° Quick Fact:</strong> Storefront API keys are used for public API access and read-only operations on product catalogs, categories, and storefront data.</p></blockquote><p><strong>Header Format:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>X-STOREFRONT-KEY: sk_live_xxxxxxxxxxxxx</span></span></code></pre></div><p><strong>Quick Example:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://your-domain.com/api/shop/products&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;X-STOREFRONT-KEY: sk_live_xxxxxxxxxxxxx&quot;</span></span></code></pre></div><h2 id="key-management-notes" tabindex="-1">Key Management Notes <a class="header-anchor" href="#key-management-notes" aria-label="Permalink to &quot;Key Management Notes&quot;">‚Äã</a></h2><ul><li>üîì <strong>Public APIs Only</strong> - Storefront keys are intended for public, read-only access</li><li>üë§ <strong>Customer Operations</strong> - Use Bearer tokens (from authentication) for customer-specific operations</li><li>üë®‚Äçüíº <strong>Admin Operations</strong> - Use admin Bearer tokens for administrative operations</li><li>üìä <strong>Rate Limited</strong> - Each key has configurable rate limits to protect your API</li></ul><hr><h2 id="quick-reference" tabindex="-1">Quick Reference <a class="header-anchor" href="#quick-reference" aria-label="Permalink to &quot;Quick Reference&quot;">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Task</th><th>Command</th></tr></thead><tbody><tr><td>Create new key</td><td><code>php artisan bagisto-api:generate-key --name=&quot;My App&quot;</code></td></tr><tr><td>Check key status</td><td><code>php artisan bagisto-api:key:manage status --key=&quot;My App&quot;</code></td></tr><tr><td>Rotate key</td><td><code>php artisan bagisto-api:key:manage rotate --key=&quot;My App&quot;</code></td></tr><tr><td>Deactivate key</td><td><code>php artisan bagisto-api:key:manage deactivate --key=&quot;Old Key&quot;</code></td></tr><tr><td>View all keys</td><td><code>php artisan bagisto-api:key:manage summary</code></td></tr><tr><td>Run maintenance</td><td><code>php artisan bagisto-api:key:maintain --all</code></td></tr></tbody></table><hr><h2 id="getting-started-5-minutes" tabindex="-1">Getting Started (5 Minutes) <a class="header-anchor" href="#getting-started-5-minutes" aria-label="Permalink to &quot;Getting Started (5 Minutes)&quot;">‚Äã</a></h2><h3 id="step-1-create-your-first-api-key" tabindex="-1">Step 1: Create Your First API Key <a class="header-anchor" href="#step-1-create-your-first-api-key" aria-label="Permalink to &quot;Step 1: Create Your First API Key&quot;">‚Äã</a></h3><p>Run this command in your terminal:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My App&quot;</span></span></code></pre></div><p><strong>You&#39;ll see:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚úì API key generated successfully!</span></span>
<span class="line"><span>Key: sk_live_xxxxxxxxxxxxx</span></span>
<span class="line"><span>Name: My App</span></span>
<span class="line"><span>Rate Limit: 100 requests/minute</span></span>
<span class="line"><span>Status: Active</span></span></code></pre></div><blockquote><p><strong>üîê Important:</strong> Save this key immediately. You won&#39;t be able to view it again after closing this terminal.</p></blockquote><h3 id="step-2-store-the-key-safely" tabindex="-1">Step 2: Store the Key Safely <a class="header-anchor" href="#step-2-store-the-key-safely" aria-label="Permalink to &quot;Step 2: Store the Key Safely&quot;">‚Äã</a></h3><p>Add it to your <code>.env</code> file:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BAGISTO_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sk_live_xxxxxxxxxxxxx</span></span></code></pre></div><p>Or store it in your secret manager (AWS Secrets Manager, HashiCorp Vault, etc.).</p><h3 id="step-3-start-making-api-requests" tabindex="-1">Step 3: Start Making API Requests <a class="header-anchor" href="#step-3-start-making-api-requests" aria-label="Permalink to &quot;Step 3: Start Making API Requests&quot;">‚Äã</a></h3><p><strong>REST API Example:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://your-domain.com/api/shop/products&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;X-STOREFRONT-API: sk_live_xxxxxxxxxxxxx&quot;</span></span></code></pre></div><p><strong>GraphQL API Example:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://your-domain.com/graphql&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;X-STOREFRONT-API: sk_live_xxxxxxxxxxxxx&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;query&quot;: &quot;{ products { id name } }&quot;}&#39;</span></span></code></pre></div><p><strong>JavaScript/Node.js Example:</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> apiKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BAGISTO_API_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://your-domain.com/api/shop/products&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;X-STOREFRONT-API&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: apiKey,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/json&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> products</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><hr><h2 id="complete-command-reference" tabindex="-1">Complete Command Reference <a class="header-anchor" href="#complete-command-reference" aria-label="Permalink to &quot;Complete Command Reference&quot;">‚Äã</a></h2><h3 id="generate-api-key" tabindex="-1">Generate API Key <a class="header-anchor" href="#generate-api-key" aria-label="Permalink to &quot;Generate API Key&quot;">‚Äã</a></h3><p>Create new API keys for different environments and applications.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--name=}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--rate-limit=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--no-activation}</span></span></code></pre></div><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--name</code></td><td>string</td><td>required</td><td>Descriptive name for your key (e.g., &quot;Mobile App&quot;, &quot;Third Party&quot;)</td></tr><tr><td><code>--rate-limit</code></td><td>integer</td><td>100</td><td>Requests allowed per minute</td></tr><tr><td><code>--no-activation</code></td><td>flag</td><td>false</td><td>Create key in inactive state (activate later)</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Basic key generation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mobile App&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># High-traffic application with custom rate limit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Partner API&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rate-limit=500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create inactive key (for later activation)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Staging Environment&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-activation</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Multiple environments</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Production&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rate-limit=1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Development&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rate-limit=200</span></span></code></pre></div><p><strong>Response:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚úì API key generated successfully!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Key:           sk_live_xxxxxxxxxxxxx</span></span>
<span class="line"><span>Name:          Mobile App</span></span>
<span class="line"><span>Rate Limit:    100 requests/minute</span></span>
<span class="line"><span>Status:        Active</span></span>
<span class="line"><span>Created:       2024-01-20 10:30:00</span></span>
<span class="line"><span>Last Used:     Never</span></span></code></pre></div><p><strong>Tips:</strong></p><ul><li>üè∑Ô∏è <strong>Name your keys clearly</strong> ‚Äî &quot;Mobile App&quot;, &quot;Website Frontend&quot;, &quot;Partner Integration&quot;</li><li>üìä <strong>Match rate limits to your needs</strong> ‚Äî Start with 100, increase as you grow</li><li>üîÑ <strong>Rotate quarterly</strong> ‚Äî Change keys every 3 months for security</li><li>üîê <strong>Never commit to Git</strong> ‚Äî Use <code>.env</code> files with <code>.gitignore</code></li></ul><hr><h3 id="manage-api-keys" tabindex="-1">Manage API Keys <a class="header-anchor" href="#manage-api-keys" aria-label="Permalink to &quot;Manage API Keys&quot;">‚Äã</a></h3><p>Monitor, rotate, and control your API keys throughout their lifecycle.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {action}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--key=}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--reason=}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--days=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--unused=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span></code></pre></div><p><strong>Available Actions:</strong></p><table tabindex="0"><thead><tr><th>Action</th><th>Purpose</th><th>Example</th></tr></thead><tbody><tr><td><code>rotate</code></td><td>Generate new key (old key becomes inactive)</td><td><code>rotate --key=&quot;Mobile App&quot;</code></td></tr><tr><td><code>deactivate</code></td><td>Disable a key immediately</td><td><code>deactivate --key=&quot;Old Key&quot; --reason=&quot;Compromised&quot;</code></td></tr><tr><td><code>status</code></td><td>Check key status and usage</td><td><code>status --key=&quot;Mobile App&quot;</code></td></tr><tr><td><code>expiring</code></td><td>List keys expiring soon</td><td><code>expiring --days=30</code></td></tr><tr><td><code>unused</code></td><td>Find keys not used recently</td><td><code>unused --days=90</code></td></tr><tr><td><code>cleanup</code></td><td>Remove expired/inactive keys</td><td><code>cleanup</code></td></tr><tr><td><code>summary</code></td><td>View all keys summary</td><td><code>summary</code></td></tr></tbody></table><p><strong>Parameters:</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>--key</code></td><td>string</td><td>optional</td><td>Key ID or name to manage</td></tr><tr><td><code>--reason</code></td><td>string</td><td>optional</td><td>Reason for deactivation (logged for audit)</td></tr><tr><td><code>--days</code></td><td>integer</td><td>7</td><td>Days threshold for &quot;expiring&quot; action</td></tr><tr><td><code>--unused</code></td><td>integer</td><td>90</td><td>Days threshold for &quot;unused&quot; action</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rotate a key (security best practice)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mobile App&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Deactivate a compromised key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deactivate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Old Integration&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --reason=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Service discontinued - replaced by new key&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check key status and usage stats</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mobile App&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find keys expiring within 30 days</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expiring</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --days=30</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find unused keys (not accessed in 90 days)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unused</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --days=90</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View summary of all keys</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> summary</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clean up old inactive keys</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cleanup</span></span></code></pre></div><p><strong>Output Examples:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Status output</span></span>
<span class="line"><span>Key:              Mobile App</span></span>
<span class="line"><span>ID:               1</span></span>
<span class="line"><span>Status:           Active</span></span>
<span class="line"><span>Created:          2024-01-20 10:30:00</span></span>
<span class="line"><span>Last Used:        2024-01-25 15:45:30</span></span>
<span class="line"><span>Total Requests:   15,234</span></span>
<span class="line"><span>Average RPM:      125</span></span>
<span class="line"><span>Rate Limit:       100/minute</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Summary output</span></span>
<span class="line"><span>Total Keys:       8</span></span>
<span class="line"><span>Active:           5</span></span>
<span class="line"><span>Inactive:         2</span></span>
<span class="line"><span>Expired:          1</span></span>
<span class="line"><span>Last 30 Days:     3 rotations</span></span></code></pre></div><p><strong>Security Maintenance Schedule:</strong></p><table tabindex="0"><thead><tr><th>Frequency</th><th>Action</th><th>Command</th></tr></thead><tbody><tr><td><strong>Monthly</strong></td><td>Review unused keys</td><td><code>php artisan bagisto-api:key:manage unused --days=90</code></td></tr><tr><td><strong>Monthly</strong></td><td>Check expiring keys</td><td><code>php artisan bagisto-api:key:manage expiring --days=30</code></td></tr><tr><td><strong>Quarterly</strong></td><td>Rotate production keys</td><td><code>php artisan bagisto-api:key:manage rotate --key=&quot;Production&quot;</code></td></tr><tr><td><strong>Immediately</strong></td><td>Deactivate compromised</td><td><code>php artisan bagisto-api:key:manage deactivate --key=&quot;Old Key&quot; --reason=&quot;Compromised&quot;</code></td></tr></tbody></table><hr><h3 id="automate-maintenance" tabindex="-1">Automate Maintenance <a class="header-anchor" href="#automate-maintenance" aria-label="Permalink to &quot;Automate Maintenance&quot;">‚Äã</a></h3><p>Set up automatic cleanup, notifications, and key management.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:maintain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--cleanup}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--invalidate}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--notify}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {--all}</span></span></code></pre></div><p><strong>What Each Option Does:</strong></p><table tabindex="0"><thead><tr><th>Option</th><th>What It Does</th><th>When to Use</th></tr></thead><tbody><tr><td><code>--cleanup</code></td><td>Deletes expired and old keys</td><td>Scheduled daily maintenance</td></tr><tr><td><code>--invalidate</code></td><td>Disables deprecated keys</td><td>Policy enforcement</td></tr><tr><td><code>--notify</code></td><td>Sends expiration warnings</td><td>Proactive team notifications</td></tr><tr><td><code>--all</code></td><td>Runs all tasks above</td><td>Comprehensive maintenance ‚úÖ</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Clean up expired keys</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:maintain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cleanup</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Send expiration notifications</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:maintain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notify</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run complete maintenance (recommended)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:maintain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Schedule in Laravel Task Scheduler (in app/Console/Kernel.php)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$schedule-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">command(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;bagisto-api:key:maintain --all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -&gt;daily</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;02:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>Output:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>‚úì Maintenance completed successfully</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Cleanup:</span></span>
<span class="line"><span>  - Removed 2 expired keys</span></span>
<span class="line"><span>  - Freed up space: 4.2 KB</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Invalidation:</span></span>
<span class="line"><span>  - Deactivated 1 deprecated key</span></span>
<span class="line"><span>  - Audit logged</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Notifications:</span></span>
<span class="line"><span>  - Sent 3 expiration reminders</span></span>
<span class="line"><span>  - 3 emails queued</span></span></code></pre></div><p><strong>Recommended Scheduler Setup:</strong></p><p>Add this to your <code>app/Console/Kernel.php</code> to automate key management:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> schedule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schedule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $schedule)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Daily maintenance: cleanup, invalidate, notify</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $schedule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bagisto-api:key:maintain --all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">daily</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;02:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2 AM UTC</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onOneServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Weekly check for expiring keys</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $schedule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bagisto-api:key:manage expiring --days=30&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">weeklyOn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;09:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Every Monday at 9 AM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Monthly review of unused keys</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $schedule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bagisto-api:key:manage unused --days=90&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">monthlyOn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;10:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1st of month at 10 AM</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p><strong>Note:</strong> Make sure your Laravel scheduler is running with <code>php artisan schedule:work</code> (development) or set up a cron job (production).</p></blockquote><hr><h2 id="security-best-practices" tabindex="-1">Security Best Practices <a class="header-anchor" href="#security-best-practices" aria-label="Permalink to &quot;Security Best Practices&quot;">‚Äã</a></h2><h3 id="‚úÖ-do-this" tabindex="-1">‚úÖ Do This <a class="header-anchor" href="#‚úÖ-do-this" aria-label="Permalink to &quot;‚úÖ Do This&quot;">‚Äã</a></h3><ul><li><p><strong>Store in <code>.env</code></strong> ‚Äî Keep keys out of your codebase</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BAGISTO_API_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sk_live_xxxxxxxxxxxxx</span></span></code></pre></div></li><li><p><strong>Use environment-specific keys</strong> ‚Äî Different keys for dev/staging/production</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BAGISTO_API_KEY_DEV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sk_test_xxxxxxx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BAGISTO_API_KEY_PROD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sk_live_yyyyyyy</span></span></code></pre></div></li><li><p><strong>Access via config</strong> ‚Äî Use Laravel&#39;s config system</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$apiKey </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;services.bagisto.api_key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><p><strong>Rotate quarterly</strong> ‚Äî Change keys every 3 months</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Production&quot;</span></span></code></pre></div></li><li><p><strong>Use secret managers</strong> ‚Äî AWS Secrets Manager, HashiCorp Vault, etc.</p></li><li><p><strong>Monitor usage</strong> ‚Äî Check for unusual activity</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Production&quot;</span></span></code></pre></div></li></ul><h3 id="‚ùå-don-t-do-this" tabindex="-1">‚ùå Don&#39;t Do This <a class="header-anchor" href="#‚ùå-don-t-do-this" aria-label="Permalink to &quot;‚ùå Don&#39;t Do This&quot;">‚Äã</a></h3><ul><li>‚õî <strong>Hardcode keys in source files</strong></li><li>‚õî <strong>Log API keys in error messages</strong></li><li>‚õî <strong>Share keys via email or chat</strong></li><li>‚õî <strong>Commit <code>.env</code> to Git</strong></li><li>‚õî <strong>Use the same key for multiple environments</strong></li><li>‚õî <strong>Ignore expired or unused keys</strong></li></ul><hr><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">‚Äã</a></h2><h3 id="invalid-api-key-error" tabindex="-1">&quot;Invalid API Key&quot; Error <a class="header-anchor" href="#invalid-api-key-error" aria-label="Permalink to &quot;&quot;Invalid API Key&quot; Error&quot;">‚Äã</a></h3><p><strong>Problem:</strong> Your API request is being rejected.</p><p><strong>Solution:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Check if key exists and is active</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Your Key Name&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Verify the key hasn&#39;t expired</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Look for Status: Active in the output</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Make sure you&#39;re using the correct header</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should be: X-STOREFRONT-API: sk_live_xxxxxxxxxxxxx</span></span></code></pre></div><h3 id="rate-limit-exceeded-error" tabindex="-1">&quot;Rate Limit Exceeded&quot; Error <a class="header-anchor" href="#rate-limit-exceeded-error" aria-label="Permalink to &quot;&quot;Rate Limit Exceeded&quot; Error&quot;">‚Äã</a></h3><p><strong>Problem:</strong> You&#39;re hitting too many requests per minute.</p><p><strong>Quick Fix:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rotate the key with a higher rate limit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Your Key&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --rate-limit=500</span></span></code></pre></div><p><strong>Better Solution:</strong></p><ul><li>Implement request queuing in your application</li><li>Add delays between burst requests</li><li>Contact Bagisto support for enterprise limits</li></ul><h3 id="lost-or-exposed-key" tabindex="-1">Lost or Exposed Key <a class="header-anchor" href="#lost-or-exposed-key" aria-label="Permalink to &quot;Lost or Exposed Key&quot;">‚Äã</a></h3><p><strong>Problem:</strong> You&#39;ve lost your key or think it&#39;s been compromised.</p><p><strong>Immediate Action:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Deactivate the compromised key immediately</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deactivate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My App&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --reason=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Suspected compromise - exposed in logs&quot;</span></span></code></pre></div><p><strong>Next Steps:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create a new key to replace it</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:generate-key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My App (New)&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Save the new key safely</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Update your .env or secret manager</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Test that new key works</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Monitor old key for unauthorized use</span></span></code></pre></div><h3 id="key-not-appearing-in-summary" tabindex="-1">Key Not Appearing in Summary <a class="header-anchor" href="#key-not-appearing-in-summary" aria-label="Permalink to &quot;Key Not Appearing in Summary&quot;">‚Äã</a></h3><p><strong>Problem:</strong> You created a key but it doesn&#39;t show up.</p><p><strong>Solution:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check if it was created in inactive state</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unused</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --days=1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify with the full summary</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> summary</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If using --no-activation flag, key needs to be activated</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Your Key&quot;</span></span></code></pre></div><h3 id="requests-working-locally-but-not-in-production" tabindex="-1">Requests Working Locally But Not in Production <a class="header-anchor" href="#requests-working-locally-but-not-in-production" aria-label="Permalink to &quot;Requests Working Locally But Not in Production&quot;">‚Äã</a></h3><p><strong>Problem:</strong> API works in development but fails in production.</p><p><strong>Check These:</strong></p><ol><li><p><strong>Different keys?</strong> ‚Äî Make sure you&#39;re using the production key</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $BAGISTO_API_KEY  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check what&#39;s loaded</span></span></code></pre></div></li><li><p><strong>Environment variables?</strong> ‚Äî Verify <code>.env</code> is loaded</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;services.bagisto.api_key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Should not be null</span></span></code></pre></div></li><li><p><strong>Network issues?</strong> ‚Äî Check firewall/security groups</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://your-domain.com/api/shop/products</span></span></code></pre></div></li><li><p><strong>Expired key?</strong> ‚Äî Check expiration date</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bagisto-api:key:manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Production&quot;</span></span></code></pre></div></li></ol><h2 id="understanding-rate-limits" tabindex="-1">Understanding Rate Limits <a class="header-anchor" href="#understanding-rate-limits" aria-label="Permalink to &quot;Understanding Rate Limits&quot;">‚Äã</a></h2><p>Each API key has a configured rate limit. For detailed information about rate limiting, see the <a href="./rate-limiting.html">Rate Limiting Guide</a>.</p><p><strong>Quick Summary:</strong></p><ul><li>Default limit: 100 requests per minute</li><li>Custom limits: Set when creating or updating keys</li><li>Monitor with response headers: <code>X-RateLimit-Limit</code>, <code>X-RateLimit-Remaining</code>, <code>X-RateLimit-Reset</code></li><li>Rate limit exceeded: 429 status with <code>retry_after</code> field</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check rate limit for your key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://your-domain.com/api/shop/products&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;X-STOREFRONT-KEY: pk_storefront_xxxxx&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -i</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Shows response headers including rate limit info</span></span></code></pre></div><h2 id="what-s-next" tabindex="-1">What&#39;s Next? <a class="header-anchor" href="#what-s-next" aria-label="Permalink to &quot;What&#39;s Next?&quot;">‚Äã</a></h2><ul><li>üìä <a href="./rate-limiting.html">Rate Limiting Guide</a> - Understand and handle rate limits</li><li>üîê <a href="./authentication.html">Authentication Guide</a> - Learn about API authentication</li><li>üîó <a href="./rest-api/introduction.html">REST API Guide</a> - Explore REST API endpoints</li><li>‚ö° <a href="./graphql-api/introduction.html">GraphQL API Guide</a> - Discover GraphQL capabilities</li><li>üöÄ <a href="./integrations.html">Integration Guides</a> - Real-world integration examples</li></ul>`,112)]))}const c=i(n,[["render",p]]);export{g as __pageData,c as default};
